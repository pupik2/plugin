<div style="max-width:900px; margin:30px auto; text-align:center;">
    <h1>Подарок для вас!</h1>

    {if $error}
    <div style="color:#d00; margin:10px 0;">{$error|escape}</div>
    {/if}
    {if $ok}
    <div style="color:#090; margin:10px 0;">Письмо отправлено!</div>
    {/if}

    <p>
        <a class="button green" href="{$spin_url|escape}">Получить</a>
    </p>

    {if $gift}
    <div style="display:inline-block; border:2px dashed #0b0; padding:20px; text-align:center; margin-bottom:20px;">
        <div style="margin-bottom:10px;">{$wa->shop->productImgHtml($gift, '200')}</div>
        <div style="font-size:18px; font-weight:bold; margin:6px 0;">{$gift.name|escape}</div>
        <div style="margin:6px 0;">Цена: <strong>{$gift_price_html|default:'—'}</strong></div>
        {if $gift_url}
        <a href="{$gift_url|escape}" class="button green">Перейти к товару</a>
        {/if}
    </div>

    <form method="post" style="margin-top: 10px;">
        {$wa->csrf()}
        <input type="hidden" name="pid" value="{$gift.id|escape}">
        <div style="margin:10px 0;">
            <input type="email" name="email" placeholder="Ваш e-mail" required style="padding:8px; min-width:260px;">
        </div>
        <div>
            <button type="submit" class="button">Отправить на e-mail</button>
        </div>
    </form>

    <p style="margin-top:12px;">
        <a href="{$spin_url|escape}">Попробовать другой (сделал как тест выпадения различных товаров) </a>
    </p>
    {else}
    {if !$has_ids}
    <p>Список товаров пуст. Укажите ID в настройках плагина.</p>
    {else}
    <p>Нажмите «Крутить», чтобы получить случайный товар из списка.</p>
    {/if}
    {/if}
</div>